@import "tailwindcss";

/* =============================================================================
   CURSOR CLOUD AGENTS - COLOR THEME SPEC
   ============================================================================= */

/* LIGHT THEME (default) */
:root {
  /* Core */
  --color-theme-bg: #F7F7F4;
  --color-theme-card: #F2F1ED;
  --color-theme-fg: #26251E;
  --color-theme-fg-02: #3B3A33;

  /* Accent */
  --color-theme-accent: #F54E00;

  /* Text */
  --color-theme-text-primary: var(--color-theme-fg);
  --color-theme-text-secondary: color-mix(in oklab, var(--color-theme-fg) 60%, transparent);
  --color-theme-text-tertiary: color-mix(in oklab, var(--color-theme-fg) 40%, transparent);
  --color-theme-text-quaternary: color-mix(in oklab, var(--color-theme-fg) 20%, transparent);
  --color-theme-text-inverted: var(--color-theme-bg);

  /* Background */
  --color-theme-bg-primary: var(--color-theme-fg);
  --color-theme-bg-secondary: color-mix(in oklab, var(--color-theme-fg) 8%, transparent);
  --color-theme-bg-tertiary: color-mix(in oklab, var(--color-theme-fg) 6%, transparent);
  --color-theme-bg-quaternary: color-mix(in oklab, var(--color-theme-fg) 2.5%, transparent);
  --color-theme-bg-card: var(--color-theme-card);
  --color-theme-bg-card-hover: color-mix(in oklab, var(--color-theme-fg) 2.5%, var(--color-theme-card));

  /* Border */
  --color-theme-border-strong: color-mix(in oklab, var(--color-theme-fg) 80%, transparent);
  --color-theme-border-primary: color-mix(in oklab, var(--color-theme-fg) 12%, transparent);
  --color-theme-border-secondary: color-mix(in oklab, var(--color-theme-fg) 8%, transparent);
  --color-theme-border-tertiary: color-mix(in oklab, var(--color-theme-fg) 4%, transparent);

  /* Icons */
  --color-theme-status-icon: #777;
  --color-theme-action-icon: #666;

  /* Brand Neutrals */
  --brand-neutrals-50: #F2F2F2;
  --brand-neutrals-100: #e6e6e6;
  --brand-neutrals-200: #cccccc;
  --brand-neutrals-300: #b3b3b3;
  --brand-neutrals-400: #999999;
  --brand-neutrals-500: #888888;
  --brand-neutrals-600: #666666;
  --brand-neutrals-700: #4d4d4d;
  --brand-neutrals-800: #333333;
  --brand-neutrals-900: #1A1A1A;

  /* Brand Blues */
  --brand-blue-100: #AFC1FB;
  --brand-blue-200: #88A2FA;
  --brand-blue-300: #6083F8;
  --brand-blue-400: #3864F6;
  --brand-blue-500: #2D50C6;
  --brand-blue-600: #162966;
  --brand-blue-700: #0B1636;

  /* Brand Pinks */
  --brand-pink-100: #F7D5F4;
  --brand-pink-200: #F2C1EE;
  --brand-pink-300: #EEACE9;
  --brand-pink-400: #EA97E3;
  --brand-pink-500: #CA7CC3;
  --brand-pink-600: #8A4584;
  --brand-pink-700: #6A2A65;

  /* Brand Yellows */
  --brand-yellow-100: #F6E1B1;
  --brand-yellow-200: #F2D189;
  --brand-yellow-300: #EDC262;
  --brand-yellow-400: #E9B33B;
  --brand-yellow-500: #BA8F2F;
  --brand-yellow-600: #5D4818;
  --brand-yellow-700: #2F240C;

  /* Brand Greens */
  --brand-green-100: #B9D796;
  --brand-green-200: #9CC56C;
  --brand-green-300: #80B343;
  --brand-green-400: #63A11A;
  --brand-green-500: #4F8115;
  --brand-green-600: #28400A;
  --brand-green-700: #142005;

  /* Brand Light Blues */
  --brand-light-blue-100: #BCE0FB;
  --brand-light-blue-200: #9BD1F9;
  --brand-light-blue-300: #79C1F7;
  --brand-light-blue-400: #58B2F5;
  --brand-light-blue-500: #4793CB;
  --brand-light-blue-600: #245477;
  --brand-light-blue-700: #13344D;

  /* Misc */
  --brand-warning: #ebcb8b;
  --brand-light-black: #191919;
  --brand-medium-black: #0c0c0c;

  /* Legacy aliases for compatibility */
  --background: var(--color-theme-bg);
  --foreground: var(--color-theme-fg);
}

/* DARK THEME */
:root.dark, .dark {
  /* Core */
  --color-theme-bg: #14120B;
  --color-theme-card: #1b1a15;
  --color-theme-fg: #EDECEC;
  --color-theme-fg-02: #D7D6D5;

  /* Card */
  --color-theme-bg-card: #1b1a15;
  --color-theme-bg-card-hover: #262622;

  /* Icons */
  --color-theme-status-icon: #DDD;
  --color-theme-action-icon: #999;
}

@theme inline {
  --color-background: var(--color-theme-bg);
  --color-foreground: var(--color-theme-fg);
  --color-accent: var(--color-theme-accent);
  --color-card: var(--color-theme-card);
  --color-text-primary: var(--color-theme-text-primary);
  --color-text-secondary: var(--color-theme-text-secondary);
  --color-text-tertiary: var(--color-theme-text-tertiary);
  --color-border-primary: var(--color-theme-border-primary);
  --color-border-secondary: var(--color-theme-border-secondary);
  --font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace;
}

* {
  box-sizing: border-box;
  /* Remove 300ms tap delay on mobile */
  touch-action: manipulation;
}

html {
  background: var(--color-theme-bg);
  /* Fix 100vh bug on mobile - use fill-available as fallback */
  height: 100%;
  height: -webkit-fill-available;
}

body {
  background: var(--color-theme-bg);
  color: var(--color-theme-fg);
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Fix 100vh bug on mobile */
  min-height: 100%;
  min-height: -webkit-fill-available;
}

/* Smooth animations */
@keyframes slide-in-from-bottom {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

.animate-in {
  animation-duration: 300ms;
  animation-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
  animation-fill-mode: forwards;
}

.slide-in-from-bottom {
  animation-name: slide-in-from-bottom;
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--color-theme-border-primary);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-theme-border-strong);
}

/* Focus styles */
:focus-visible {
  outline: 1px solid var(--color-theme-border-primary);
  outline-offset: 1px;
}

/* Remove focus ring from certain elements */
textarea:focus-visible,
select:focus-visible {
  outline: none;
}

/* Selection */
::selection {
  background: color-mix(in oklab, var(--color-theme-accent) 40%, transparent);
}

/* Safe area utilities for iOS */
.pt-safe {
  padding-top: max(0.5rem, env(safe-area-inset-top));
}

.pb-safe {
  padding-bottom: max(1rem, env(safe-area-inset-bottom));
}

.pb-safe-sm {
  padding-bottom: max(0.5rem, env(safe-area-inset-bottom));
}

/* Elegant shimmer text effect for loading states */
/* Muted base with bright highlight sweep from right to left */
.shimmer-text {
  background: linear-gradient(
    90deg,
    var(--color-theme-text-tertiary) 0%,
    var(--color-theme-text-tertiary) 40%,
    var(--color-theme-text-primary) 50%,
    var(--color-theme-text-tertiary) 60%,
    var(--color-theme-text-tertiary) 100%
  );
  background-size: 200% 100%;
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  animation: shimmer-mask 2s infinite linear;
}

/* Subtle shimmer for active agent response - gentle fade effect */
.shimmer-active {
  animation: shimmer-pulse 1.2s ease-in-out infinite;
}

/* Shimmer sweep animation - used by .shimmer-text and ShimmerText component */
@keyframes shimmer-mask {
  0% {
    background-position: 100% 0;
  }
  100% {
    background-position: -100% 0;
  }
}

@keyframes shimmer-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

/* Typewriter cursor blink */
@keyframes cursor-blink {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}

/* Skeleton shimmer for loading states */
.skeleton-shimmer {
  position: relative;
  overflow: hidden;
}

.skeleton-shimmer::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    90deg,
    transparent 0%,
    var(--color-theme-bg-tertiary) 50%,
    transparent 100%
  );
  animation: skeleton-wave 1s linear infinite;
}

@keyframes skeleton-wave {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

/* Vaul left-side drawer overrides */
[vaul-drawer][vaul-drawer-direction="left"] {
  right: auto !important;
  left: 0 !important;
  top: 0 !important;
  bottom: 0 !important;
  width: auto !important;
  max-width: 100vw !important;
  height: 100% !important;
  min-height: 100vh !important;
  min-height: 100dvh !important; /* Dynamic viewport height for iOS */
}

/* Mobile touch feedback - active states */
button:active:not(:disabled),
[role="button"]:active:not(:disabled),
a:active {
  opacity: 0.7;
  transform: scale(0.98);
  transition: transform 0.1s ease, opacity 0.1s ease;
}

/* Dynamic viewport height utility - fixes 100vh bug on mobile */
.min-h-dvh {
  min-height: 100vh; /* fallback for older browsers */
  min-height: 100dvh; /* dynamic viewport height */
}

.h-dvh {
  height: 100vh;
  height: 100dvh;
}


/* ========================================
   iOS PWA Scroll & Viewport Optimizations
   ======================================== */

/* iOS PWA scroll improvements for conversation container */
[data-scroll-container] {
  /* Smooth momentum scrolling on iOS - enables natural bounce */
  -webkit-overflow-scrolling: touch;
}


/* Prevent zoom on double-tap for interactive elements */
button, a, input, textarea, select {
  touch-action: manipulation;
}


/* ========================================
   List Item Animations
   ======================================== */

/* Fade in animation */
@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.animate-fade-in {
  animation: fade-in 0.2s ease-out forwards;
}

/* Fade in and slide up animation for list items */
@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fade-in-up 0.25s ease-out forwards;
}

/* Hide scrollbar utility - keeps scrolling but hides the visual scrollbar */
.scrollbar-hidden {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}

.scrollbar-hidden::-webkit-scrollbar {
  display: none;  /* Chrome, Safari and Opera */
}

/* Frosted glass effect for chat bubbles */
.frosted-glass {
  background: color-mix(in oklab, var(--color-theme-bg-card) 70%, transparent);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid color-mix(in oklab, var(--color-theme-fg) 8%, transparent);
}

/* Frosted glass effect for chat bubbles */
.frosted-glass {
  background: color-mix(in oklab, var(--color-theme-bg-card) 65%, transparent);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  box-shadow: 
    0 2px 16px rgba(0, 0, 0, 0.06),
    inset 0 1px 0 rgba(255, 255, 255, 0.06);
  border: 1px solid color-mix(in oklab, var(--color-theme-border-tertiary) 50%, transparent);
}

